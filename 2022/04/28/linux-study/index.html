<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux学习笔记 | Holger 学习小站</title><meta name="keywords" content="Linux"><meta name="author" content="Holger"><meta name="copyright" content="Holger"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="【日常】Linux学习笔记">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux学习笔记">
<meta property="og:url" content="https://blog.holgerbest.top/2022/04/28/linux-study/index.html">
<meta property="og:site_name" content="Holger 学习小站">
<meta property="og:description" content="【日常】Linux学习笔记">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://repo.live.holgerbest.top/img/GoU8bVvpLl3zNnH.png">
<meta property="article:published_time" content="2022-04-28T11:19:35.000Z">
<meta property="article:modified_time" content="2023-08-12T10:01:55.416Z">
<meta property="article:author" content="Holger">
<meta property="article:tag" content="Linux">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://repo.live.holgerbest.top/img/GoU8bVvpLl3zNnH.png"><link rel="shortcut icon" href="/img/favicon.png"><link rel="canonical" href="https://blog.holgerbest.top/2022/04/28/linux-study/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"limitCount":50,"languages":{"author":"作者: Holger","link":"链接: ","source":"来源: Holger 学习小站","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"}},
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux学习笔记',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2023-08-12 18:01:55'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(function (e) {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.3.0"><link rel="alternate" href="/atom.xml" title="Holger 学习小站" type="application/atom+xml">
</head><body><div id="loading-box"><div class="loading-left-bg"></div><div class="loading-right-bg"></div><div class="spinner-box"><div class="configure-border-1"><div class="configure-core"></div></div><div class="configure-border-2"><div class="configure-core"></div></div><div class="loading-word">加载中...</div></div></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar.png" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">52</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://holgerbest.top/"><i class="fa-fw fas fa-home"></i><span> 主站</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Holger 学习小站</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" target="_blank" rel="noopener" href="https://holgerbest.top/"><i class="fa-fw fas fa-home"></i><span> 主站</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div id="post"><div id="post-info"><h1 class="post-title">Linux学习笔记</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="fa-fw post-meta-icon far fa-calendar-alt"></i><span class="post-meta-label">发表于</span><time datetime="2022-04-28T11:19:35.000Z" title="undefined 2022-04-28 19:19:35">2022-04-28</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux%E7%AC%94%E8%AE%B0/">Linux笔记</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">12.3k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>48分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux学习笔记"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span></div></div></div><article class="post-content" id="article-container"><h2 id="概述"><a class="markdownIt-Anchor" href="#概述"></a> 概述</h2>
<h3 id="gui"><a class="markdownIt-Anchor" href="#gui"></a> GUI</h3>
<h3 id="远程登录"><a class="markdownIt-Anchor" href="#远程登录"></a> 远程登录</h3>
<h2 id="文件和目录管理"><a class="markdownIt-Anchor" href="#文件和目录管理"></a> 文件和目录管理</h2>
<h3 id="linux文件系统"><a class="markdownIt-Anchor" href="#linux文件系统"></a> Linux文件系统</h3>
<h3 id="文件与目录的权限"><a class="markdownIt-Anchor" href="#文件与目录的权限"></a> 文件与目录的权限</h3>
<h3 id="文件属性"><a class="markdownIt-Anchor" href="#文件属性"></a> 文件属性</h3>
<h3 id="文档的压缩与打包"><a class="markdownIt-Anchor" href="#文档的压缩与打包"></a> 文档的压缩与打包</h3>
<table>
<thead>
<tr>
<th>后缀</th>
<th>类型</th>
</tr>
</thead>
<tbody>
<tr>
<td>gz</td>
<td>由gzip压缩的文件</td>
</tr>
<tr>
<td>bz2</td>
<td>由bzip2压缩的文件</td>
</tr>
<tr>
<td>xz</td>
<td>由xz压缩的文件</td>
</tr>
<tr>
<td>tar</td>
<td>由tar程序打包的文件（tar并没有压缩功能, 只是把一个目录合并成一个文件）</td>
</tr>
<tr>
<td>tar.gz</td>
<td>先经tar程序打包，再经gzip压缩</td>
</tr>
<tr>
<td>tar.bz2</td>
<td>先经tar程序打包，再经bzip2压缩</td>
</tr>
<tr>
<td>tar.xz</td>
<td>先经tar程序打包，再经xz压缩</td>
</tr>
</tbody>
</table>
<h4 id="gzip"><a class="markdownIt-Anchor" href="#gzip"></a> gzip</h4>
<ul>
<li>-c ：将压缩的数据输出到屏幕上，可通过重定向来处理；</li>
<li>-d ：解压缩的参数；</li>
<li>-t ：可以用来检验一个压缩档的一致性；</li>
<li>-v ：可以显示出原文件 / 压缩文件的压缩比等；</li>
<li>-k : 不删除原文件（默认会删除原文件）</li>
<li>-数字 ：压缩等级，-1 最快，但是压缩比最差、-9 最慢，但是压缩比 最好！默认是 -6</li>
</ul>
<h4 id="bzip2"><a class="markdownIt-Anchor" href="#bzip2"></a> bzip2</h4>
<p>bzip 2 比 gzip 提供更佳的压缩比.</p>
<ul>
<li>-c ：将压缩的数据输出到屏幕上，可通过重定向来处理；</li>
<li>-d ：解压缩的参数；</li>
<li>-t ：可以用来检验一个压缩档的一致性；</li>
<li>-v ：可以显示出原文件 / 压缩文件的压缩比等；</li>
<li>-k : 不删除原文件（默认会删除原文件）</li>
<li>-数字 ：压缩等级，-1 最快，但是压缩比最差、-9 最慢，但是压缩比 最好！默认是 -6</li>
</ul>
<h4 id="xz"><a class="markdownIt-Anchor" href="#xz"></a> xz</h4>
<ul>
<li>-d ：解压缩的参数；</li>
<li>-v ：可以显示出原文件 / 压缩文件的压缩比等；</li>
<li>-k : 不删除原文件（默认会删除原文件）</li>
<li>-z ：压缩的参数</li>
</ul>
<h4 id="tar"><a class="markdownIt-Anchor" href="#tar"></a> tar</h4>
<p>用来建立，还原备份文件的工具程序，可以将多个目录或文件打包成一个大文件，同时还可以使用 gzip/bzip2/xz 将该文件同时进行压缩。常用的参数有：</p>
<ul>
<li>-c或–create  建立新的备份文件。</li>
<li>-f&lt;备份文件&gt;或–file=&lt;备份文件&gt;  指定备份文件，可以搭配 -C ( 大写 ) 在特定目录解开。</li>
<li>-v或–verbose  显示指令执行过程。</li>
<li>-t  查看tar包里的文件</li>
<li>-x或–extract或–get 从备份文件中还原文件。</li>
<li>-z或–gzip或–ungzip  通过gzip指令处理备份文件。</li>
<li>-j  通过bzip2指令处理备份文件。</li>
<li>-J  通过xz指令处理备份文件。</li>
</ul>
<h4 id="zipunzip"><a class="markdownIt-Anchor" href="#zipunzip"></a> zip/unzip</h4>
<ul>
<li>-r 递归处理，将指定目录下的所有文件和子目录一并处理。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> zip 1.txt.zip 1.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> zip -r test111.zip test111</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> unzip 1.txt.zip</span></span><br></pre></td></tr></table></figure>
<h3 id="文档压缩的练习"><a class="markdownIt-Anchor" href="#文档压缩的练习"></a> 文档压缩的练习</h3>
<p>1、gzip, bzip2 能否直接压缩目录呢？</p>
<p>不能直接压缩目录</p>
<p>2、请快速写出，使用gzip和bzip2压缩和解压一个文件的命令。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> gzip 1.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> gzip -d 1.txt.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> bzip2 1.txt</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> bzip2 -d 1.txt.bz2</span></span><br></pre></td></tr></table></figure>
<p>3、tar 在打包的时候，如果想排除多个文件或者目录如何操作？</p>
<p><code>tar cvf 123.tar --exclude a.txt --exclude b.txt 123/</code></p>
<p>4、请实验，如果不加 “<code>-</code>” 是否正确， 如 tar zcvf 1.tar.gz 1.txt 2.txt ?</p>
<p>不加 <code>-</code> 一样没有问题</p>
<p>5、如何使用tar打包和解包 .tar.gz, .tar.bz2 的压缩包？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tar zcvf 1.tar.gz 1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar zxvf 1.tar.gz</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar jcvf 1.tar.bz2 1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tar jxvf 1.tar.bz2</span></span><br></pre></td></tr></table></figure>
<p>6、找一个大点的文件，使用tar 分别把这个文件打成 .tar.gz和.tar.bz2 压缩包，比较一下哪个包会更小，从而得出结论，是gzip压缩效果好还是bzip2压缩效果好？</p>
<p>理论上.tar.bz2的压缩包小一些，但个别时候，有相反的情况。但大多时候bzip2压缩效果好。</p>
<p>7、使用tar打包并压缩的时候，默认压缩级别为几？ 想一想如何能够改变压缩级别呢？（提示，tar本身没有这个功能哦，可以尝试拆分打包和压缩）</p>
<p>tar打包压缩时，是按照gzip和bzip2的默认压缩级别来的，gzip工具默认压缩级别为6，bzip2默认压缩级别为9.</p>
<p>改变默认压缩级别可以这样来做，首先tar打包，然后再使用gzip或者bzip2压缩工具来压缩，压缩的时候指定压缩级别。如： <code>tar cvf 1.tar 123/; gzip -2 1.tar</code></p>
<h2 id="系统用户与用户组管理"><a class="markdownIt-Anchor" href="#系统用户与用户组管理"></a> 系统用户与用户组管理</h2>
<h3 id="用户"><a class="markdownIt-Anchor" href="#用户"></a> 用户</h3>
<h4 id="etcpasswd"><a class="markdownIt-Anchor" href="#etcpasswd"></a> /etc/passwd</h4>
<h4 id="etcshadow"><a class="markdownIt-Anchor" href="#etcshadow"></a> /etc/shadow</h4>
<h4 id="登录的用户"><a class="markdownIt-Anchor" href="#登录的用户"></a> 登录的用户</h4>
<h4 id="创建用户"><a class="markdownIt-Anchor" href="#创建用户"></a> 创建用户</h4>
<h4 id="修改密码"><a class="markdownIt-Anchor" href="#修改密码"></a> 修改密码</h4>
<h4 id="修改用户信息"><a class="markdownIt-Anchor" href="#修改用户信息"></a> 修改用户信息</h4>
<h4 id="删除用户"><a class="markdownIt-Anchor" href="#删除用户"></a> 删除用户</h4>
<h3 id="群组"><a class="markdownIt-Anchor" href="#群组"></a> 群组</h3>
<h4 id="etcgroup"><a class="markdownIt-Anchor" href="#etcgroup"></a> /etc/group</h4>
<h4 id="etcgshadow"><a class="markdownIt-Anchor" href="#etcgshadow"></a> /etc/gshadow</h4>
<h4 id="新增删除群组"><a class="markdownIt-Anchor" href="#新增删除群组"></a> 新增/删除群组</h4>
<h3 id="acl"><a class="markdownIt-Anchor" href="#acl"></a> ACL</h3>
<h3 id="使用者身份切换"><a class="markdownIt-Anchor" href="#使用者身份切换"></a> 使用者身份切换</h3>
<h3 id="练习"><a class="markdownIt-Anchor" href="#练习"></a> 练习</h3>
<p>1、查看配置文件/etc/shadow第一行中root账号的第三个字段（以’:'分隔）中的数字，请算一下这个数字是怎么来的？</p>
<p>距离19700101到修改密码的时间</p>
<p>2、写出一个您认为很强悍的密码.</p>
<p>3、查资料搞明白 /sbin/nologin 和 /bin/false 的区别，你知道他们用在什么场合吗？</p>
<ul>
<li>/sbin/nologin: 不允许登录</li>
<li>/bin/false: 任何服务都不允许</li>
</ul>
<p>4、请想一想，当我们创建一个新的账号时，系统会修改哪几个文件呢？</p>
<ul>
<li>/etc/passwd</li>
<li>/etc/shadow</li>
<li>/etc/group</li>
<li>/etc/gshadow</li>
</ul>
<p>5、假如我们已经创建了一个普通用户user1, 默认这个用户的家目录为/home/user1, 做实验证明能否直接修改/etc/passwd配置文件中user1的家目录那个字段而改变user1的家目录呢？ （提示: 您可以使用 “cd ~ ”命令来进入当前用户家目录的方法来验证）</p>
<p>可以直接修改/etc/passwd配置文件中user1的家目录</p>
<p>6、/etc/passwd 文件以&quot;:&quot;为分隔符，第三和第四个字段表示什么含义？如果把某一行的第三个字段改为’0’ 会发生什么？</p>
<p>如果修改为0，则表示该用户为超级用户</p>
<p>7、 先新增一个组group11，然后再新增一个账号user12, 使该账号所属组为刚刚新增的组。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">groupadd group11</span><br><span class="line">useradd –g group11 user12</span><br></pre></td></tr></table></figure>
<blockquote>
<p>-g主组, -G附属组</p>
</blockquote>
<p>8、如果删除一个组时报错: “cannot remove the primary group of user ‘aming’” 这是什么意思？如何解决该问题呢？</p>
<p>因为待删除的组，是用户aming的主组，因此无法删除。 需要先将aming这个用户删除（或者将aming用户的主组修改为其他组）</p>
<p>9、如何删除某个账户时，连带这个账户的家目录一并删除？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">userdel –r user0</span><br></pre></td></tr></table></figure>
<p>10、普通账户可以修改自己的密码吗？</p>
<p>11、使用su时，后面加了 ‘-’ 表示什么含义？</p>
<p>12、sudo的作用是什么呢？</p>
<p>13、创建系统账号时，帐户名要符合什么样的规范？</p>
<h2 id="磁盘管理"><a class="markdownIt-Anchor" href="#磁盘管理"></a> 磁盘管理</h2>
<h3 id="linux下的磁盘"><a class="markdownIt-Anchor" href="#linux下的磁盘"></a> Linux下的磁盘</h3>
<h3 id="df"><a class="markdownIt-Anchor" href="#df"></a> df</h3>
<h3 id="du"><a class="markdownIt-Anchor" href="#du"></a> du</h3>
<h3 id="fdisk"><a class="markdownIt-Anchor" href="#fdisk"></a> fdisk</h3>
<h3 id="mke2fs"><a class="markdownIt-Anchor" href="#mke2fs"></a> mke2fs</h3>
<h3 id="mkfs"><a class="markdownIt-Anchor" href="#mkfs"></a> mkfs</h3>
<h3 id="dumpe2fs"><a class="markdownIt-Anchor" href="#dumpe2fs"></a> dumpe2fs</h3>
<h3 id="e2label"><a class="markdownIt-Anchor" href="#e2label"></a> e2label</h3>
<h3 id="mountumount"><a class="markdownIt-Anchor" href="#mountumount"></a> mount/umount</h3>
<h2 id="shell编程"><a class="markdownIt-Anchor" href="#shell编程"></a> Shell编程</h2>
<h3 id="shell基础"><a class="markdownIt-Anchor" href="#shell基础"></a> Shell基础</h3>
<p>Shell程序（壳程序）的功能只是提供用户操作系统的一个接口。</p>
<p>命令(如ls, cp, mkdir等)都是独立的应用程序， 但是我们可以通过shell程序 (就是命令列模式) 来操作这些应用程序，让这些应用程序呼叫核心来运行所需的工作。</p>
<p>查看有哪些Shell：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/shells</span></span><br></pre></td></tr></table></figure>
<p>查看使用的是哪个Shell：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/passwd</span></span><br></pre></td></tr></table></figure>
<p>Bash（Bourne-Again SHell）是一个命令处理器，通常运行于文本窗口中，并能执行用户直接输入的命令。/bin/bash 是 Linux 默认的 shell。</p>
<p>提示符：</p>
<ul>
<li><code>$</code> 普通用户</li>
<li><code>#</code> 超级用户（root）</li>
</ul>
<p>命令一般由三个部分组成：命令 选项 参数</p>
<p>bash 主要的优点:</p>
<ol>
<li>命令编修能力 (history)</li>
<li>命令与文件补全功能: (tab 按键的好处)</li>
<li>命令别名配置功能</li>
<li>工作控制、前景背景控制</li>
<li>程序化脚本</li>
<li>通配符</li>
</ol>
<p>特殊符号：</p>
<ul>
<li><code>*</code> (代表零个或多个任意字符)</li>
<li><code>?</code> (只代表一个任意的字符)</li>
<li><code>#</code> (注释符号)</li>
<li><code>\</code> (脱义字符)</li>
</ul>
<h4 id="历史记录"><a class="markdownIt-Anchor" href="#历史记录"></a> 历史记录</h4>
<p>按『上下键』就可以找到前/后一个输入的命令，还可以查看文件 <code>∼/.bash_history</code></p>
<ul>
<li><code>!!</code> 重复前一个命令</li>
<li><code>!字符</code> 重复前一个以‘字符’开头的命令</li>
<li><code>!num</code> 按照历史记录的序号执行命令</li>
<li><code>!?abc</code> 重复之前包含’abc’的命令</li>
<li><code>!-n</code> 重复前第n个命令</li>
<li>通过 Ctrl+R 在历史记录中搜索命令</li>
<li>重新调用前一个命令中的参数: 按esc之后再按.</li>
</ul>
<h4 id="补全功能"><a class="markdownIt-Anchor" href="#补全功能"></a> 补全功能</h4>
<p>Tab 接在一串命令的第一个字的后面，则为命令补全;</p>
<p>Tab 接在一串命令的第二个字以后时，则为『文件补齐』。</p>
<h4 id="命令别名"><a class="markdownIt-Anchor" href="#命令别名"></a> 命令别名</h4>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">alias 别名=&#x27;命令&#x27;</span><br></pre></td></tr></table></figure>
<p>将linux下的rm命令改造成移动文件至回收站：</p>
<p>步骤1：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p ∼/.trash</span><br><span class="line">vim ∼/.bashrc</span><br></pre></td></tr></table></figure>
<p>步骤2：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">alias</span> rm=<span class="string">&#x27;trash&#x27;</span></span><br><span class="line"><span class="function"><span class="title">trash</span></span>() &#123;</span><br><span class="line">  mv <span class="variable">$@</span> ∼/.trash/ </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="工作控制-前景背景控制"><a class="markdownIt-Anchor" href="#工作控制-前景背景控制"></a> 工作控制、前景背景控制</h4>
<ul>
<li>
<p>在后台运行进程：在命令后添加一个<code>&amp;</code></p>
</li>
<li>
<p>暂停某个程序：Ctrl+Z</p>
</li>
<li>
<p>管理后台作业：jobs、bg、fg</p>
</li>
</ul>
<h4 id="通配符"><a class="markdownIt-Anchor" href="#通配符"></a> 通配符</h4>
<ul>
<li><code>*</code> 匹配0个或多个</li>
<li><code>?</code> 匹配任意一个字符</li>
<li><code>[list]</code> 匹配list中任意一个字符</li>
<li><code>[!list]</code> 或 <code>[^list]</code> 匹配除了list中任意一个字符</li>
<li><code>[c1-c2]</code> 匹配区间内的任何一个字符</li>
<li><code>[!c1-c2]</code> 或 <code>[^c1-c2]</code>匹配区间外的任何一个字符</li>
<li><code>&#123;str1,str2,...&#125;</code> 匹配str1,str2,…其一</li>
</ul>
<blockquote>
<p>注意通配符中不能出现空格。</p>
</blockquote>
<h4 id="变量"><a class="markdownIt-Anchor" href="#变量"></a> 变量</h4>
<ul>
<li>定义: <code>变量名=变量值</code><br />
注意: 等号前后<strong>不能存在空格</strong></li>
<li>使用：<code>$变量名</code>、<code>$&#123;变量名&#125;</code>，或使用反单引号</li>
</ul>
<p>双引号: <strong>允许</strong>引用、转义</p>
<p>单引号: <strong>禁止</strong>引用、转义</p>
<p>反撇号, 或者<code>$()</code>: 以命令<strong>输出进行替换</strong></p>
<p><strong>环境变量</strong>：用来记录、设置运行参数</p>
<ul>
<li>HOME: 代表用户的家目录。</li>
<li>SHELL: 目前这个环境使用的 SHELL 是哪个程序. Linux 默认使用 /bin/bash</li>
<li>HISTSIZE: 命令历史记录数量。</li>
<li>MAIL: 使用 mail 这个命令在收信时，系统会去读取的邮件信箱文件。</li>
<li>PATH: 就是运行文件搜寻的路径，目录与目录中间以冒号(<code>:</code>)分隔，由于文件的搜寻是依序由 PATH 的变量内的目录来查询，所以，目录的顺序也是重要的。</li>
<li>PWD：当前工作目录。</li>
<li>LANG：系统语言以及字符编码。</li>
<li>LOGNAME：登录用户名。</li>
</ul>
<blockquote>
<p>基本上，在 Linux 默认的情况中，使用大写的字母来配置的变量一般为系统内定需要的变量.</p>
</blockquote>
<ul>
<li>env：观察<strong>环境变量</strong>与常见环境变量说明</li>
<li>set：观察所有变量 (含<strong>环境变量与自定义变量</strong>).</li>
<li>export：自定义变量转成环境变量</li>
</ul>
<p><strong>特殊变量</strong>：（由系统或脚本控制, 不能直接赋值）</p>
<ul>
<li><code>$?</code>: 前一条命令的状态值: 0为正常, 非0为异常.</li>
<li><code>$0</code>: 脚本自身的程序名.</li>
<li><code>$1</code> - <code>$9</code>: 第1 - 第9个位置参数</li>
<li><code>$*</code>: 命令行的所有位置参数内容</li>
<li><code>$#</code>: 命令行的位置参数个数</li>
</ul>
<ol>
<li>若该变量需要在其他子程序运行，则需要以 export 来使变量变成环境变量.</li>
<li>通常大写字符为系统默认变量，自行配置变量可 以使用小写字符，方便判断</li>
<li>取消变量的方法为使用 unset</li>
</ol>
<hr />
<p>在 PATH 这个变量当中添加：/home/dmtsai/bin</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> PATH=<span class="variable">$PATH</span>:/home/dmtsai/bin</span></span><br></pre></td></tr></table></figure>
<p>将name的内容多出“yes”</p>
<h2 id="-code11-"><a class="markdownIt-Anchor" href="#-code11-"></a> <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> name=<span class="string">&quot;<span class="variable">$name</span>&quot;</span>yes</span></span><br></pre></td></tr></table></figure></h2>
<h4 id="命令的运行顺序"><a class="markdownIt-Anchor" href="#命令的运行顺序"></a> 命令的运行顺序</h4>
<ol>
<li>以相对/绝对路径执行命令，例如<code>/bin/ls</code>或<code>./ls</code></li>
<li>由alias找到该命令来执行</li>
<li>由bash内置的(builtin)命令来执行</li>
<li>通过<code>$PATH</code>这个变量的顺序找到第一个命令来执行</li>
<li>都没有找到：提示“command not found”</li>
</ol>
<h3 id="管道与重定向"><a class="markdownIt-Anchor" href="#管道与重定向"></a> 管道与重定向</h3>
<p>大多数 UNIX/Linux 系统命令从<strong>终端接受输入</strong>并将所产生的输出<strong>发送回到终端</strong>.</p>
<ul>
<li>标准输入: 键盘</li>
<li>标准输出: 显示屏</li>
</ul>
<p>两种标准输出：</p>
<ul>
<li>标准输出 (STDOUT), 文件描述符 <strong>1</strong></li>
<li>标准错误输出 (STDERR), 文件描述符 <strong>2</strong></li>
</ul>
<p>一种标准输入:</p>
<ul>
<li>标准输入 (STDIN), 文件描述符为 <strong>0</strong></li>
</ul>
<h4 id="重定向"><a class="markdownIt-Anchor" href="#重定向"></a> 重定向</h4>
<p><strong>重定向</strong>:改变程序运行的<strong>输入源</strong>和<strong>输出地点</strong>.</p>
<p><strong>文件重定向</strong>:改变程序运行的<strong>输入源为某个文件</strong>, <strong>输出地点为某个文件</strong>.</p>
<ul>
<li><code>&gt;</code>：输出重定向 文件不存在则创建 存在会覆盖原有文件</li>
<li><code>&gt;&gt;</code>：输出重定向 文件不存在则创建 存在在原有文件后追加</li>
<li><code>&lt;</code>：输入重定向</li>
</ul>
<p>特殊文件 /dev/null：写入到它的内容都会被丢弃，将命令的输出重定向到它，会起到”禁止输出”的效果.</p>
<p>同时重定位标准输出和标准错误输出到统一文件：<code>&amp;&gt;file</code></p>
<h4 id="管道"><a class="markdownIt-Anchor" href="#管道"></a> 管道</h4>
<p><strong>管道</strong>是可以看作是一种特殊的重定向，将一个命令的输出重定向为另一个命令的输入。<br />
格式: <code>命令1|命令2|...|命令n</code>。操作符<code>|</code>右侧命令必须能够接受标准输入。管道不会使用标准错误输出。</p>
<h4 id="here-document-与-here-string"><a class="markdownIt-Anchor" href="#here-document-与-here-string"></a> Here Document 与 Here String</h4>
<p>Here Document 以两个连续的小于号<code>&lt;&lt;</code>开始，紧跟着一个特殊的字符序列，该字符序列在文档结尾处再次出现。它可以保存文字里面的换行或是缩进等空白字符。</p>
<p>Here String 以3个连续的小于号<code>&lt;&lt;&lt;</code>开始，紧跟着一个字符串。</p>
<p>在Unix shell里，Here Document 和 Here String 通常用于给命令提供输入内容。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tr a-z A-Z &lt;&lt;<span class="string">END_TEXT</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> one two three</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> uno dos tres</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> END_TEXT</span></span><br><span class="line">ONE TWO THREE</span><br><span class="line">UNO DOS TRES</span><br></pre></td></tr></table></figure>
<p><code>END_TEXT</code>被用作标识符，它指定了Here Document的开始和结束。</p>
<p>在<code>&lt;&lt;</code>后面添加一个减号，可以使TAB被忽略。这允许在shell脚本中缩进Here Document而不改变它们的值。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tr a-z A-Z &lt;&lt;-<span class="string">END_TEXT</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">         one two three</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">         uno dos tres</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> END_TEXT</span></span><br><span class="line">ONE TWO THREE</span><br><span class="line">UNO DOS TRES</span><br></pre></td></tr></table></figure>
<p>默认地，会进行变量替换和命令替换：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat &lt;&lt; <span class="string">EOF</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Working dir <span class="variable">$PWD</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> EOF</span></span><br><span class="line">Working dir /home/user</span><br></pre></td></tr></table></figure>
<p>这可以通过使用引号包裹标识符来禁用。可以使用单引号或双引号：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat &lt;&lt; <span class="string">&quot;EOF&quot;</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> Working dir <span class="variable">$PWD</span></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash"> EOF</span></span><br><span class="line">Working dir $PWD</span><br></pre></td></tr></table></figure>
<p>bash，ksh或zsh中也可以用Here String：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tr a-z A-Z &lt;&lt;&lt;<span class="string">&quot;Yes it is a string&quot;</span></span></span><br><span class="line">YES IT IS A STRING</span><br></pre></td></tr></table></figure>
<h3 id="cut"><a class="markdownIt-Anchor" href="#cut"></a> cut</h3>
<p>将一行中的一段信息“切”出来, 处理的信息是以“行”为单位.</p>
<ul>
<li><code>-d</code>：自定义分隔符，默认为tab。</li>
<li><code>-c</code>：以字符为单位进行分割，指定字符范围。</li>
<li><code>-f</code>：指定显示哪个区域（字段）</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将PATH变量取出，找出第5个路径.</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$PATH</span> | cut -d <span class="string">&#x27;:&#x27;</span> -f 5</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将PATH变量取出，找出第3, 第5个路径.</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$PATH</span> | cut -d <span class="string">&#x27;:&#x27;</span> -f 3,5</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 将<span class="variable">$PATH</span>输出的信息取得第12字符以后的所有字符串</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="variable">$PATH</span> | cut -c 12-</span></span><br></pre></td></tr></table></figure>
<h3 id="sort"><a class="markdownIt-Anchor" href="#sort"></a> sort</h3>
<p>按行排序</p>
<p>选项与参数:</p>
<ul>
<li><code>-f</code> :忽略大小写的差异，例如 A 与 a 视为编码相同;</li>
<li><code>-b</code> :忽略最前面的空格符部分;</li>
<li><code>-M</code> :以月份的名字来排序，例如 JAN, DEC 等等的排序方法;</li>
<li><code>-n</code> :使用『纯<strong>数字</strong>』进行排序(默认是以<strong>文字</strong>型态来排序的);</li>
<li><code>-r</code> :<strong>反向</strong>排序;</li>
<li><code>-u</code> :就是 uniq ，相同的数据中，仅出现一行代表;</li>
<li><code>-t</code> :分隔符，默认是用 [tab] 键来分隔;</li>
<li><code>-k</code> :以那个区间 (field) 来进行排序的意思</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 个人账号都记录在 /etc/passwd 下，请将账号进行排序</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/passwd | sort -t <span class="string">&#x27;:&#x27;</span> -k1</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sort -t <span class="string">&#x27;:&#x27;</span> -k1 /etc/passwd</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sort -t <span class="string">&#x27;:&#x27;</span> -k1 &lt; /etc/passwd</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> /etc/passwd 内容是以 : 来分隔的，我想以第三栏按数字大小来排序</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/passwd | sort -t <span class="string">&#x27;:&#x27;</span> -k3 -n</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 利用 last ，将输出的数据仅取账号，并加以去重排序</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last | cut -d <span class="string">&#x27; &#x27;</span> -f1 | sort -u</span></span><br></pre></td></tr></table></figure>
<h3 id="uniq"><a class="markdownIt-Anchor" href="#uniq"></a> uniq</h3>
<p>uniq 可检查文本文件中（相邻）重复出现的行。</p>
<ul>
<li><code>-c</code>或<code>--count</code> 在每列旁边显示该行重复出现的次数。</li>
<li><code>-d</code>或<code>--repeated</code> 仅显示<strong>重复出现</strong>的行。</li>
<li><code>-i</code>忽略大小写。</li>
<li><code>-u</code>或<code>--unique</code> 仅显示出<strong>一次</strong>的行。</li>
</ul>
<h3 id="wc"><a class="markdownIt-Anchor" href="#wc"></a> wc</h3>
<p>计算输出的信息的整体数据(默认输出行数、字数、字符数)</p>
<ul>
<li><code>-l</code>:仅列出<strong>行</strong>;</li>
<li><code>-w</code> :仅列出多少<strong>字</strong>(英文单字);</li>
<li><code>-m</code> :多少<strong>字符</strong>;</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 以一行命令取得这个月份登陆系统的总人次</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last | grep <span class="string">&quot;[a-zA-Z]&quot;</span> | grep -v <span class="string">&#x27;wtmp&#x27;</span> | wc -l</span></span><br></pre></td></tr></table></figure>
<h3 id="tee"><a class="markdownIt-Anchor" href="#tee"></a> tee</h3>
<p>同时将数据流分送到文件去与屏幕 (stdout)</p>
<ul>
<li><code>-a</code> : 追加到文件</li>
</ul>
<h3 id="tr"><a class="markdownIt-Anchor" href="#tr"></a> tr</h3>
<p>用来删除一段信息当中的文字，或者是进行文字信息的替换</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">tr [OPTION] SET1 [SET2]</span><br></pre></td></tr></table></figure>
<p>当SET1和SET2给出, 并且没有给出-d选项, 替换SET1中的每一个字符为<strong>相应</strong>SET2中的字符.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> tr abcdefghijklmnopqrstuvwxyz ABCDEFGHIJKLMNOPQRSTUVWXYZ</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tr [:lower:] [:upper:]</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tr a-z A-Z</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tr ’ &#123;&#125; ’ ’()’ &lt;inputfile&gt; outputfile</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;This is for testing&quot;</span> | tr [:space:] <span class="string">&#x27;.&#x27;</span></span></span><br><span class="line">This.is.for.testing.</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;This  is  for  testing&quot;</span> | tr [:space:] <span class="string">&#x27;.&#x27;</span></span> </span><br><span class="line">This..is..for..testing.</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;This  is  for  testing&quot;</span> | tr -s [:space:] <span class="string">&#x27;.&#x27;</span></span></span><br><span class="line">This.is.for.testing.</span><br><span class="line"><span class="meta">#</span><span class="bash"> 删除某个字符</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;the geek stuff&quot;</span> | tr -d <span class="string">&#x27;t&#x27;</span></span></span><br><span class="line">he geek suff</span><br><span class="line"><span class="meta">$</span><span class="bash"> <span class="built_in">echo</span> <span class="string">&quot;my username is 432234&quot;</span> | tr -d [:digit:]</span></span><br><span class="line">my username is</span><br><span class="line"><span class="meta">#</span><span class="bash"> 仅保留可打印字符</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> tr -<span class="built_in">cd</span> [:<span class="built_in">print</span>:] &lt; file.txt</span></span><br></pre></td></tr></table></figure>
<h3 id="paste"><a class="markdownIt-Anchor" href="#paste"></a> paste</h3>
<p>paste 将两个文件中的每一行合并为一行, 中间以 [tab] 键隔开. <code>paste [-d] file1 file2</code></p>
<p>选项与参数：</p>
<ul>
<li><code>-d</code> ：后面可以接分隔字符。默认是以 [tab] 来分隔</li>
<li><code>-</code>：如果 file 部分写成 <code>-</code> ，表示来自 standard input 的数据。</li>
</ul>
<h3 id="expand"><a class="markdownIt-Anchor" href="#expand"></a> expand</h3>
<p>将 [tab] 按键转成空格键</p>
<ul>
<li><code>-t</code>：后面接数字。默认一个 tab 按键用 8 个空格键取代。</li>
</ul>
<h3 id="split"><a class="markdownIt-Anchor" href="#split"></a> split</h3>
<p>将一个大文件依据文件大小或行数来分割. <code>split [-bl] file PREFIX</code></p>
<ul>
<li><code>-b</code> ：后面可接欲分割成的文件大小，可加单位，例如 b, k, m 等；</li>
<li><code>-l</code> ：以行数来进行分割。</li>
<li><code>PREFIX</code> ：代表前导符的意思，可作为分割后文件的前导文字。</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> split -b 300k /etc/termcap termcap</span> </span><br><span class="line"><span class="meta">$</span><span class="bash"> ls -al / | split -l 10 - lsroot</span></span><br></pre></td></tr></table></figure>
<h3 id="shell基础练习"><a class="markdownIt-Anchor" href="#shell基础练习"></a> Shell基础练习</h3>
<p>1、设置环境变量 HISTSIZE , 使其能够保存10000条命令历史。</p>
<p>修改/etc/profile文件里抽HISTSIZE的值为10000</p>
<p>2、为什么如果这样设置PS1 (<code>PS1=&quot;[\u@\h \W]\$ &quot;</code>) 显示的结果和我们预想的不一样，那要如何设置才能恢复原来默认的？</p>
<p><code>PS1='[\u@\h \W]\$'</code></p>
<p>3、想办法把当前目录下的文件的文件名中的小写字母全部替换为大写字母。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">for f in `ls`; do </span><br><span class="line">  if echo $f | grep -q &#x27;[a-z]&#x27;; then </span><br><span class="line">    mv $f `echo $f | tr [a-z] [A-Z]`; </span><br><span class="line">  fi; </span><br><span class="line">done</span><br></pre></td></tr></table></figure>
<p>4、使用sort以&quot;<code>:</code>&quot;为分隔符，对/etc/passwd文件的第5段排序。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sort -k5 -t: /etc/passwd</span><br></pre></td></tr></table></figure>
<p>5、使用cut以&quot;<code>:</code>&quot;为分隔符，截出/etc/passwd的第三段字符。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">cut -d : -f 3 /etc/passwd</span><br></pre></td></tr></table></figure>
<p>6、简述这几个文件的作用：</p>
<p>系统环境变量 与 个人环境变量</p>
<ul>
<li>
<p>/etc/profile: 预设了几个重要的变量，例如 PATH, USER, LOGNAME…</p>
</li>
<li>
<p>/etc/bashrc: 预设umask和PS1</p>
</li>
<li>
<p>~/.bashrc: 专属于当前用户shell的bash信息</p>
</li>
<li>
<p>~/.bash_profile: 当前用户的个性化路径与环境变量的文件</p>
</li>
</ul>
<p>7、export 的作用是什么？</p>
<p>将局部变量转换为全局变量</p>
<p>局部变量: 仅在当前的shell下有效</p>
<p>全局变量: 在当前的shell以及其各子shell下均有效</p>
<p>8、linux下自定义变量要符合什么样的规则呢？</p>
<p>变量名: 以字母数字和下划线, 但不能以数字开头</p>
<p>变量定义的格式如: <code>a=b</code>, 其中a表示变量, b表示变量的内容，=号前后不能出现空格.</p>
<p>变量的引用: <code>$a</code>, 前在需要加<code>$</code>符号, 或者 <code>$&#123;a&#125;</code></p>
<p>9、如何把要运行的命令丢到后台跑？又如何把后台跑的进程给调到前台？</p>
<p><strong>把正在前台运行的命令放到后台</strong>:</p>
<p>(1) Ctrl + Z 暂停 (会打印作业编号); (2) bg 作业编号</p>
<p><strong>把还未运行的作业放到后台</strong>:</p>
<p>在命令后面加个<code>&amp;</code>, 如：<code>sleep 60 &amp;</code></p>
<p><strong>后台命令放到前台</strong>：</p>
<p>fg 作业编号</p>
<p>10、 列出当前目录下以&quot;test&quot;开头的文件和目录。</p>
<p><code>ls test*</code></p>
<p>11、 如何把一个命令的输出内容不仅打印到屏幕上而且还可以重定向到一个文件内？</p>
<p>使用tee 命令. 举例: <code>ls ./ | tee abc.txt</code></p>
<p>12、假如有个命令很长，我们如何使用一个简单的字符串代替这个复杂的命令呢？请举例说明。</p>
<p>使用alias别名</p>
<p><code>alias abc=&quot;………………&quot;</code></p>
<p>后面执行 abc</p>
<p>13、我如何实现这样的功能，把一条命令丢到后台运行，而且把其正确输出和错误输出同时重定向到一个文件内？</p>
<p><code>perl test.pl 1&gt; a.txt 2&gt;&amp;1 &amp;</code></p>
<p>14、如何按照大小（假如按照10M)分隔一个大文件，又如何按照行数(假如10000行)分隔？</p>
<p>使用split命令</p>
<p><code>split -b 10M abc.txt abc</code></p>
<p><code>split -l 10000 abc.txt abc</code></p>
<p>15、做实验，搞明白 ; &amp;&amp; || 这三个符号的含义。</p>
<p><code>命令1 ; 命令2</code> : 命令1和命令2之间没有什么关系，两个命令都会执行，先执行命令1再执行命令2</p>
<p><code>命令1 &amp;&amp; 命令2</code> : 如果命令1执行不成功, 那么不会执行命令2；如果命令1执行成功，执行命令2</p>
<blockquote>
<p>是否执行成功，返回值是否为0 (0表示成功)</p>
</blockquote>
<p><code>命令1 || 命令2</code> : 如果命令1执行成功, 则不执行命令2; 否则执行命令2</p>
<p>16、如果只想让某个用户使用某个变量如何做？</p>
<p><strong>个人环境变量</strong>的配置</p>
<p>可以去修改该用户的 <code>~/.bashrc</code>文件, 比如增加一行 <code>abc=123</code></p>
<p>然后再执行<code>source ~/.bashrc</code></p>
<p>17、使用哪个命令会把系统当中所有的变量以及当前用户定义的自定义变量列出来？</p>
<p>使用set命令</p>
<p>18、统计当前价目录中符号连接文件的个数：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> ls -lah | grep <span class="string">&quot;^l&quot;</span> | wc -l</span></span><br></pre></td></tr></table></figure>
<h3 id="正则表达式"><a class="markdownIt-Anchor" href="#正则表达式"></a> 正则表达式</h3>
<p>正则表达式是与一组字符串匹配的模式。 模式由运算符，文字字符和元字符组成，它们具有特殊的含义。</p>
<p><code>^</code>符号与一行<strong>开头</strong>的字符串匹配。 <code>$</code>符号与行的<strong>结尾</strong>字符串匹配。</p>
<p>匹配所有<strong>空行</strong>的<code>^$</code>模式，即开头与结束都没有内容。</p>
<p><code>.</code>符号是与<strong>任何单个字符</strong>（除换行符）匹配的元字符。</p>
<p><code>[]</code>中括号表达式允许将字符括在中括号<code>[]</code>来匹配一组字符，可以在括号内指定一系列字符，如果方括号内的第一个字符是符号<code>^</code>，则它将匹配方括号中未括起来的任何字符。</p>
<table>
<thead>
<tr>
<th style="text-align:left">预定义字符</th>
<th style="text-align:left">字符类</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>[:alnum:]</code></td>
<td style="text-align:left">字母数字字符 。</td>
</tr>
<tr>
<td style="text-align:left"><code>[:alpha:]</code></td>
<td style="text-align:left">字母字符。</td>
</tr>
<tr>
<td style="text-align:left"><code>[:blank:]</code></td>
<td style="text-align:left">空格和制表符。</td>
</tr>
<tr>
<td style="text-align:left"><code>[:digit:]</code></td>
<td style="text-align:left">数字。</td>
</tr>
<tr>
<td style="text-align:left"><code>[:lower:]</code></td>
<td style="text-align:left">小写字母。</td>
</tr>
<tr>
<td style="text-align:left"><code>[:upper:]</code></td>
<td style="text-align:left">大写字母。</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">量词</th>
<th style="text-align:left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>*</code></td>
<td style="text-align:left">将前一项匹配零次或多次。</td>
</tr>
<tr>
<td style="text-align:left"><code>?</code></td>
<td style="text-align:left">将前一项匹配零或一次。</td>
</tr>
<tr>
<td style="text-align:left"><code>+</code></td>
<td style="text-align:left">匹配前一项一次或多次。</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;n&#125;</code></td>
<td style="text-align:left">精确匹配前一项<code>n次</code></td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;n,&#125;</code></td>
<td style="text-align:left">至少匹配<code>n</code>次。</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;,m&#125;</code></td>
<td style="text-align:left">最多匹配前一项<code>m</code>次。</td>
</tr>
<tr>
<td style="text-align:left"><code>&#123;n,m&#125;</code></td>
<td style="text-align:left">匹配前一项从<code>n</code>至<code>m</code> 次。</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr>
<th style="text-align:left">反斜杠表达式</th>
<th style="text-align:left">说明</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left"><code>\b</code></td>
<td style="text-align:left">匹配单词边界。</td>
</tr>
<tr>
<td style="text-align:left"><code>\&lt;</code></td>
<td style="text-align:left">匹配单词开头的空字符串。</td>
</tr>
<tr>
<td style="text-align:left"><code>\&gt;</code></td>
<td style="text-align:left">在单词末尾匹配一个空字符串。</td>
</tr>
<tr>
<td style="text-align:left"><code>\w</code></td>
<td style="text-align:left">匹配一个单词。</td>
</tr>
<tr>
<td style="text-align:left"><code>\s</code></td>
<td style="text-align:left">匹配空格。</td>
</tr>
</tbody>
</table>
<h3 id="grep"><a class="markdownIt-Anchor" href="#grep"></a> grep</h3>
<p>分析一行信息，如果当中有我们所需要的信息，就将该行拿出来.</p>
<p><code>grep [-acinv] [- -color=auto] '查找字符串' filename</code></p>
<p>选项与参数：</p>
<ul>
<li>-a : 将 binary 文件以 text 文件的方式搜寻数据</li>
<li>-c : 计算找到 ’搜寻字符串’ 的次数</li>
<li>-i : 忽略大小写的不同，所以大小写视为相同</li>
<li>-n : 顺便输出行号</li>
<li>-v : 反向选择，亦即显示出没有 ’搜寻字符串’ 内容的那一行</li>
<li>-w : 匹配整词</li>
<li>–color=auto : 可以将找到的关键词部分加上颜色的显示</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 将 last 当中，有出现 root 的那一行就取出来;</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> last: 登录到这台机器的用户记录</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last | grep <span class="string">&#x27;root&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 与上一条相反，只要没有 root 的就取出.</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last | grep -v <span class="string">&#x27;root&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 在 last 的输出信息中，只要有 root 就取出，并且仅取第一栏.</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> last | grep <span class="string">&#x27;root&#x27;</span> | cut -d <span class="string">&#x27; &#x27;</span> -f1</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 取出 /etc/man.config 内含 MANPATH 的那几行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&#x27;MANPATH&#x27;</span> /etc/man.config</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> cat /etc/man.config | grep <span class="string">&#x27;MANPATH&#x27;</span></span></span><br><span class="line"><span class="meta">$</span><span class="bash"> grep <span class="string">&#x27;MANPATH&#x27;</span> &lt; /etc/man.config</span></span><br></pre></td></tr></table></figure>
<p>GNU <code>grep</code> 支持三种正则表达式语法Basic，Extended和Perl-compatible。</p>
<p>当没有给出正则表达式类型时，<code>grep</code> 以Basic的形式调用，<code>grep</code>将搜索模式解释为Basic正则表达式。 要将模式解释为Extended的正则表达式，请使用<code>-E</code>（或<code>--extended-regexp</code>）选项。</p>
<blockquote>
<p>在Basic正则表达式中，元字符<code>?</code>，<code>+</code>，<code>&#123;</code>，<code>|</code>，<code>(</code> 和 <code>)</code> 被解释为<strong>文字字符</strong>。 为了在使用基本正则表达式时保持元字符的特殊含义，必须使用<strong>反斜杠</strong>（<code>\</code>）对字符进行转义。（扩展不需要转义）</p>
</blockquote>
<p>应始终将正则表达式括在单引号中，以避免shell解释和扩展元字符。</p>
<p>如果搜索包含空格的字符串，则需要将其用<strong>单引号或双引号</strong>引起来。</p>
<h3 id="awk编程语言数据处理引擎"><a class="markdownIt-Anchor" href="#awk编程语言数据处理引擎"></a> awk（编程语言/数据处理引擎）</h3>
<p><code>awk '模式 [操作]' 文件1 文件2 ......</code></p>
<p>-F 选项：设置分割字段当字符。</p>
<p>每个awk程序都是 <strong>一个或多个 模式-操作</strong> 语句的序列。awk 的基本操作是一行一行的扫描输入，搜索匹配任意程序中模式的行。“匹配”的准确意义是视具体的模式而言，对于模式 $3&gt;0 来说，意思是“条件为真”。 每个模式依次测试每个输入行。对于匹配到行的模式，其对应的动作（也许包含多步）得到执行，然后读取下一行并继续匹配，直到所有的输入读取完毕。</p>
<p><strong>由于模式和动作两者任一都是可选的，所以需要使用大括号包围动作用以区分其他模式。</strong></p>
<p>假设存在一个文件 emp.data，其中包含员工的姓名、薪资（美元/小时）以及小时数，一个员工一行数据，其内容如下:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">Beth	4.00	0</span><br><span class="line">Dan	3.75	0</span><br><span class="line">kathy	4.00	10</span><br><span class="line">Mark	5.00	20</span><br><span class="line">Mary	5.50	22</span><br><span class="line">Susie	4.25	18</span><br></pre></td></tr></table></figure>
<p>打印工作时长超过0小时的员工姓名和工资(薪资乘以时间)：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$3&gt;0 &#123;print $1, $2*$3&#125;&#x27;</span>  emp.data</span></span><br><span class="line">kathy 40</span><br><span class="line">Mark 100</span><br><span class="line">Mary 121</span><br><span class="line">Susie 76.5</span><br></pre></td></tr></table></figure>
<p>打印没有工作过的员工姓名：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$3==0 &#123;print $1&#125;&#x27;</span>  emp.data</span></span><br><span class="line">Beth</span><br><span class="line">Dan</span><br></pre></td></tr></table></figure>
<p>也可以省略命令行中的输入文件，仅仅输入： <code>awk 'program codes'</code> 在这种情况下，awk 将会应用于你在终端接着输入的任意数据行，直到你输入一个文件结束信号（Unix系统上为control-d）。示例：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$3&gt;0 &#123;print $1&#125;&#x27;</span></span></span><br><span class="line">Mary 20 1000   #输入该行回车</span><br><span class="line">Mary  # 计算机输出，匹配到了信息</span><br><span class="line">Belly 30 3000  #继续输入改行</span><br><span class="line">Belly #计算机输出</span><br></pre></td></tr></table></figure>
<p><strong>注意事项：</strong> 命令行中的程序是用单引号包围着的。这会防止shell解释程序中<code>$</code> 这样的字符，也允许程序的长度超过一行。 <strong>当程序比较长的时候，可以将程序写入到一个文件</strong>，以下命令行： <code>awk -f programfile optional list of input files</code></p>
<p>其中 -f 选项指示 awk 从指定文件中获取程序。可以使用任意文件名替换 programfile。</p>
<p>awk中仅仅只有两种类型 <strong>数值</strong>、 <strong>字符</strong> 构成的字符串。通常情况下，一个字段是一个不包含任何空格或制表符的连续字符序列。 当前输入的 行中的第一个字段被称作 <code>$1</code>，第二个是 <code>$2</code>，以此类推。 整个行的内容被定义为 <code>$0</code>。 每一行的字段数量可以不同。</p>
<h4 id="输出"><a class="markdownIt-Anchor" href="#输出"></a> 输出</h4>
<p>如果一个动作没有任何模式，这个动作针对所有输入的行进行操作，print 语句用来打印（输出）当前输入的行，<code>&#123;print&#125;</code> 等效于 <code>&#123;print $0&#125;</code>。</p>
<p>也可以指定特定的表达式： <code>&#123;print $1,$3&#125;</code>。在 print 语句中被逗号分隔的表达式，在默认情况下他们将会用一个空格分割来输出。每一行print生成的内容都会以一个换行符作为结束。还可以在字段中间或者计算的值中间打印输出想要的内容： <code>&#123;print &quot;total pay for&quot;, $1, &quot;is&quot;, $2*$3&#125;</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;print &quot;total pay for&quot;, $1, &quot;is&quot;, $2*$3&#125;&#x27;</span> emp.data</span></span><br><span class="line">total pay for Beth is 0</span><br><span class="line">total pay for Dan is 0</span><br><span class="line">total pay for kathy is 40</span><br><span class="line">total pay for Mark is 100</span><br><span class="line">total pay for Mary is 121</span><br><span class="line">total pay for Susie is 76.5</span><br></pre></td></tr></table></figure>
<p><strong>NF</strong>： AWK 会对当前输入的行<strong>有多少字段</strong>进行计数，并且将当前行的字段数量存储在一个内建的称为 <strong>NF</strong> 的变量中。因此 <code>&#123;print NF,$1,$NF&#125;</code> 会打印出 <u>每一行的字段数量、第一个字段的值、最后一个字段的值</u>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;print NF,$1,$NF&#125;&#x27;</span> emp.data</span></span><br><span class="line">3 Beth 0</span><br><span class="line">3 Dan 0</span><br><span class="line">3 kathy 10</span><br><span class="line">3 Mark 20</span><br><span class="line">3 Mary 22</span><br><span class="line">3 Susie 18</span><br></pre></td></tr></table></figure>
<p><strong>NR</strong>：存储了当前已经读取了多少行的计数。可以使用 NR 和<code>$0</code>给emp.data的每一行加上行号： <code>&#123;print NR,$0&#125;</code>。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;print NR,$0&#125;&#x27;</span> emp.data</span></span><br><span class="line">1 Beth  4.00    0</span><br><span class="line">2 Dan   3.75    0</span><br><span class="line">3 kathy 4.00    10</span><br><span class="line">4 Mark  5.00    20</span><br><span class="line">5 Mary  5.50    22</span><br><span class="line">6 Susie 4.25    18</span><br></pre></td></tr></table></figure>
<p><strong>printf 语句</strong>：<code>printf(format, value1, value2, ..., valueN)</code></p>
<p>其中 format 是字符串，包含要逐字打印的文本，穿插在 format 之后的每个值该如何打印的规格。一个规格是一个 % 符，后面跟着一些字符，用来控制一个 value 的格式。因此，有过少个 value 要打印，在 format 中就要有多少个 % 规格。 打印每个员工的总薪酬：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;printf(&quot;total pay for %s is $%.2f\n&quot;, $1, $2*$3)&#125;&#x27;</span>  emp.data</span></span><br><span class="line">total pay for Beth is $0.00</span><br><span class="line">total pay for Dan is $0.00</span><br><span class="line">total pay for kathy is $40.00</span><br><span class="line">total pay for Mark is $100.00</span><br><span class="line">total pay for Mary is $121.00</span><br><span class="line">total pay for Susie is $76.50</span><br></pre></td></tr></table></figure>
<p><strong>排序</strong>：</p>
<p>以薪酬递增的方式输出每一行：将awk的输出通过管道传给 **sort **命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;printf(&quot;%6.2f %s\n&quot;, $2*$3, $0)&#125;&#x27;</span> emp.data | sort</span></span><br><span class="line">  0.00  Beth    4.00    0</span><br><span class="line">  0.00  Dan     3.75    0</span><br><span class="line">100.00  Mark    5.00    20</span><br><span class="line">121.00  Mary    5.50    22</span><br><span class="line"> 40.00  kathy   4.00    10</span><br><span class="line"> 76.50  Susie   4.25    18</span><br></pre></td></tr></table></figure>
<blockquote>
<p>若要按照第一列的数值大小排序，sort需要添加 <code>-k1n</code> 选项。</p>
</blockquote>
<h4 id="选择"><a class="markdownIt-Anchor" href="#选择"></a> 选择</h4>
<h5 id="通过对比选择"><a class="markdownIt-Anchor" href="#通过对比选择"></a> 通过对比选择</h5>
<p>使用一个对比模式来选择每小时赚5美元或更多的员工记录，亦即第二个字段大于等于5的行： <code>$2&gt;=5</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$2&gt;=5&#x27;</span>  emp.data</span></span><br><span class="line">Mark    5.00    20</span><br><span class="line">Mary    5.50    22</span><br></pre></td></tr></table></figure>
<h5 id="通过计算选择"><a class="markdownIt-Anchor" href="#通过计算选择"></a> 通过计算选择</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$2*$3&gt;50 &#123;printf(&quot;$%.2f for %s\n&quot;, $2*$3, $1)&#125;&#x27;</span> emp.data</span></span><br><span class="line"><span class="meta">$</span><span class="bash">100.00 <span class="keyword">for</span> Mark</span></span><br><span class="line"><span class="meta">$</span><span class="bash">121.00 <span class="keyword">for</span> Mary</span></span><br><span class="line"><span class="meta">$</span><span class="bash">76.50 <span class="keyword">for</span> Susie</span></span><br></pre></td></tr></table></figure>
<h5 id="通过文本内容选择"><a class="markdownIt-Anchor" href="#通过文本内容选择"></a> 通过文本内容选择</h5>
<p>除了数值测试，还可以选择包含特定单词或短语的输入行。这个程序会打印所有第一个字段为 Susie 的行：<code>$1==&quot;Susie&quot;</code></p>
<p>操作符 == 用于测试相等性。 也可以使用<strong>正则表达式</strong>的模式查找包含任意任意字母组合，单词或短语的文本。如以下可以匹配到任意位置包含Susie的行： <code>/Susie/</code></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;/Susie/&#x27;</span>  emp.data</span></span><br><span class="line">Susie   4.25    18</span><br></pre></td></tr></table></figure>
<h5 id="模式组合"><a class="markdownIt-Anchor" href="#模式组合"></a> 模式组合</h5>
<p>可以使用括号和逻辑操作符号与<code>&amp;&amp;</code>、或<code>||</code>，以及非<code>!</code> 对模式进行组合。 <code>$2&gt;=4||$3&gt;=20</code> 会打印第二个字段大于等于4或者第三个字段大于等于20的行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$2&gt;=4||$3&gt;=20&#x27;</span>  emp.data</span></span><br><span class="line">Beth    4.00    0</span><br><span class="line">kathy   4.00    10</span><br><span class="line">Mark    5.00    20</span><br><span class="line">Mary    5.50    22</span><br><span class="line">Susie   4.25    18</span><br></pre></td></tr></table></figure>
<h4 id="begin-与-end"><a class="markdownIt-Anchor" href="#begin-与-end"></a> BEGIN 与 END</h4>
<p>特殊模式 BEGIN 用于匹配第一个输入文件的第一行之前的位置。END 则用于匹配处理过的最后一个文件的最后一行的位置。</p>
<p>这个程序使用 BEGIN 来输出一个标题：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN &#123;print &quot;Name RATE HOURS&quot;; print &quot;&quot;&#125; &#123;print&#125;&#x27;</span> emp.data</span></span><br><span class="line">Name RATE HOURS</span><br><span class="line"></span><br><span class="line">Beth    4.00    0</span><br><span class="line">Dan     3.75    0</span><br><span class="line">kathy   4.00    10</span><br><span class="line">Mark    5.00    20</span><br><span class="line">Mary    5.50    22</span><br><span class="line">Susie   4.25    18</span><br></pre></td></tr></table></figure>
<p><strong>注意事项：</strong></p>
<ul>
<li>awk 可以在一行上放多个语句，使用分号<code>;</code>进行分隔。</li>
<li>普通的 <code>print</code>是打印当前输入行，<code>print &quot;&quot;</code> 则会打印一个空行。</li>
</ul>
<p>AWK 是按一行一行地读取输入的。</p>
<ul>
<li>1.首先执行 <strong>BEGIN</strong> 块</li>
<li>2.从输入中读取一行</li>
<li>3.在这次读取的这一行中执行 AWK 命令</li>
<li>4.如果文件还没有读取完毕，则重复步骤2、3</li>
<li>5.执行 <strong>END</strong> 块中的 awk 命令</li>
</ul>
<h4 id="使用-awk-进行计算"><a class="markdownIt-Anchor" href="#使用-awk-进行计算"></a> 使用 AWK 进行计算</h4>
<h5 id="计数"><a class="markdownIt-Anchor" href="#计数"></a> 计数</h5>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$3 &gt; 15 &#123;emp = emp + 1&#125; END &#123;print emp, &quot;employees worked more than 15 hours&quot;&#125;&#x27;</span> emp.data</span></span><br><span class="line">3 employees worked more than 15 hours</span><br></pre></td></tr></table></figure>
<p>用作数字的 awk 变量的默认初始值为0， 所以不需要初始化 emp。创建一个变量emp初始值为0，如果读入的那一行的第三个字段大于15，则emp在自身值的基础上自增1，读完最后一行后输出存在多少个员工工作时长超过15个小时的语句。</p>
<h5 id="求和与平均值"><a class="markdownIt-Anchor" href="#求和与平均值"></a> 求和与平均值</h5>
<p>为计算员工数目，可以使用内置变量 NR，保存了当前位置读取的行数；在所有输入的结尾它的值就是所读行的总行数。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;END &#123;print NR, &quot;employees&quot;&#125;&#x27;</span>  emp.data</span></span><br><span class="line">6 employees</span><br></pre></td></tr></table></figure>
<p>如下是一个使用 NR 来计算薪酬均值的程序：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;pay = pay + $2*$3&#125; \</span></span></span><br><span class="line"><span class="bash">END &#123;<span class="built_in">print</span> NR, <span class="string">&quot;employees&quot;</span> \</span></span><br><span class="line"><span class="bash"><span class="built_in">print</span> <span class="string">&quot;total pay is&quot;</span>, pay \</span></span><br><span class="line"><span class="bash"><span class="built_in">print</span> <span class="string">&quot;average pay is&quot;</span>, pay/NR \</span></span><br><span class="line"><span class="bash">&#125;<span class="string">&#x27; emp.data</span></span></span><br><span class="line">6 employees</span><br><span class="line">total pay is 337.5</span><br><span class="line">average pay is 56.25</span><br></pre></td></tr></table></figure>
<blockquote>
<p>注意awk程序中变量不需要以<code>$</code>开头!</p>
</blockquote>
<h4 id="处理文本"><a class="markdownIt-Anchor" href="#处理文本"></a> 处理文本</h4>
<p>awk 的优势之一是能像大多数语言处理数字一样方便地处理字符串。 awk 可以保存数字也可以保存字符。找出时薪最高的员工:</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;$2 &gt; maxrate &#123; maxrate = $2; maxemp = $1 &#125; \</span></span></span><br><span class="line"><span class="bash">END &#123; <span class="built_in">print</span> <span class="string">&quot;highest hourly rate:&quot;</span>, maxrate, <span class="string">&quot;for&quot;</span>, maxemp &#125;<span class="string">&#x27; emp.data</span></span></span><br><span class="line">highest hourly rate: 5.50 for Mary</span><br><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;&#123;names = names $1 &quot; &quot;&#125; END &#123;print names&#125;&#x27;</span> emp.data</span></span><br><span class="line">Beth Dan kathy Mark Mary Susie </span><br></pre></td></tr></table></figure>
<h4 id="打印最后一个输入行"><a class="markdownIt-Anchor" href="#打印最后一个输入行"></a> 打印最后一个输入行</h4>
<p>虽然在 END 动作中 NR 还保留着它的值， 但 $0 没有。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27; &#123;last = $0&#125; END &#123;print last&#125;&#x27;</span> emp.data</span></span><br><span class="line">Susie   4.25    18</span><br></pre></td></tr></table></figure>
<h3 id="sed"><a class="markdownIt-Anchor" href="#sed"></a> sed</h3>
<p>sed全名叫stream editor，流编辑器，用程序的方式来编辑文本。</p>
<h4 id="用s命令替换"><a class="markdownIt-Anchor" href="#用s命令替换"></a> 用s命令替换</h4>
<p>使用下面的这段文本做演示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is my dog</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">This is my fish</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>把其中的my字符串替换成Hao Chen’s（<code>s</code>表示替换命令，<code>/my/</code>表示匹配my，<code>/Hao Chen’s/</code>表示把匹配替换成Hao Chen’s，<code>/g</code> 表示一行上的替换所有的匹配）：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;s/my/Hao Chen&#x27;s/g&quot;</span> pets.txt</span></span><br><span class="line">This is Hao Chen&#x27;s cat</span><br><span class="line">  Hao Chen&#x27;s cat&#x27;s name is betty</span><br><span class="line">This is Hao Chen&#x27;s dog</span><br><span class="line">  Hao Chen&#x27;s dog&#x27;s name is frank</span><br><span class="line">This is Hao Chen&#x27;s fish</span><br><span class="line">  Hao Chen&#x27;s fish&#x27;s name is george</span><br><span class="line">This is Hao Chen&#x27;s goat</span><br><span class="line">  Hao Chen&#x27;s goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>注意：如果你要使用单引号，那么你没办法通过<code>\’</code>这样来转义，就有双引号就可以了，在双引号内可以用<code>\”</code>来转义。</p>
<p>再注意：上面的sed并没有对文件的内容改变，只是把处理过后的内容输出，如果要写回文件可以使用<strong>重定向</strong>，如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;s/my/Hao Chen&#x27;s/g&quot;</span> pets.txt &gt; hao_pets.txt</span></span><br></pre></td></tr></table></figure>
<p>或使用 <code>-i</code> 参数直接修改文件内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -i <span class="string">&quot;s/my/Hao Chen&#x27;s/g&quot;</span> pets.txt</span></span><br></pre></td></tr></table></figure>
<p>在每一行最前面加点东西：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/^/#/g&#x27;</span> pets.txt</span></span><br><span class="line"><span class="meta">#</span><span class="bash">This is my cat</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  my cat<span class="string">&#x27;s name is betty</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">This is my dog</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  my dog<span class="string">&#x27;s name is frank</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">This is my fish</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  my fish<span class="string">&#x27;s name is george</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash">This is my goat</span></span><br><span class="line"><span class="meta">#</span><span class="bash">  my goat<span class="string">&#x27;s name is adam</span></span></span><br></pre></td></tr></table></figure>
<p>在每一行最后面加点东西：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/$/ --- /g&#x27;</span> pets.txt</span></span><br><span class="line">This is my cat ---</span><br><span class="line">  my cat&#x27;s name is betty ---</span><br><span class="line">This is my dog ---</span><br><span class="line">  my dog&#x27;s name is frank ---</span><br><span class="line">This is my fish ---</span><br><span class="line">  my fish&#x27;s name is george ---</span><br><span class="line">This is my goat ---</span><br><span class="line">  my goat&#x27;s name is adam ---</span><br></pre></td></tr></table></figure>
<p>要去掉某html中的tags：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">b</span>&gt;</span>This<span class="tag">&lt;/<span class="name">b</span>&gt;</span> is what <span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;text-decoration: underline;&quot;</span>&gt;</span>I<span class="tag">&lt;/<span class="name">span</span>&gt;</span> meant. Understand?</span><br></pre></td></tr></table></figure>
<p>sed命令：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 如果你这样搞的话，就会有问题</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/&lt;.*&gt;//g&#x27;</span> html.txt</span></span><br><span class="line"> Understand?</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 要解决上面的那个问题，就得像下面这样。</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 其中的<span class="string">&#x27;[^&gt;]&#x27;</span> 指定了除了&gt;的字符重复0次或多次。</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/&lt;[^&gt;]*&gt;//g&#x27;</span> html.txt</span></span><br><span class="line">This is what I meant. Understand?</span><br></pre></td></tr></table></figure>
<p>指定需要替换的内容：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;3s/my/your/g&quot;</span> pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is your dog</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">This is my fish</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>下面的命令只替换第3到第6行的文本。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;3,6s/my/your/g&quot;</span> pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is your dog</span><br><span class="line">  your dog&#x27;s name is frank</span><br><span class="line">This is your fish</span><br><span class="line">  your fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>只替换每一行的第一个s：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/s/S/1&#x27;</span> my.txt</span></span><br><span class="line">ThiS is my cat, my cat&#x27;s name is betty</span><br><span class="line">ThiS is my dog, my dog&#x27;s name is frank</span><br><span class="line">ThiS is my fish, my fish&#x27;s name is george</span><br><span class="line">ThiS is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>只替换每一行的第二个s：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/s/S/2&#x27;</span> my.txt</span></span><br><span class="line">This iS my cat, my cat&#x27;s name is betty</span><br><span class="line">This iS my dog, my dog&#x27;s name is frank</span><br><span class="line">This iS my fish, my fish&#x27;s name is george</span><br><span class="line">This iS my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>只替换每一行的第3个以后的s：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/s/S/3g&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;S name iS betty</span><br><span class="line">This is my dog, my dog&#x27;S name iS frank</span><br><span class="line">This is my fiSh, my fiSh&#x27;S name iS george</span><br><span class="line">This is my goat, my goat&#x27;S name iS adam</span><br></pre></td></tr></table></figure>
<h4 id="多个匹配"><a class="markdownIt-Anchor" href="#多个匹配"></a> 多个匹配</h4>
<p>如果我们需要一次替换多个模式，可参看下面的示例：（第一个模式把第一行到第三行的my替换成your，第二个则把第3行以后的This替换成了That）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;1,3s/my/your/g; 3,$s/This/That/g&#x27;</span> my.txt</span></span><br><span class="line">This is your cat, your cat&#x27;s name is betty</span><br><span class="line">This is your dog, your dog&#x27;s name is frank</span><br><span class="line">That is your fish, your fish&#x27;s name is george</span><br><span class="line">That is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>上面的命令等价于：（注：下面使用的是sed的-e命令行参数）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed -e <span class="string">&#x27;1,3s/my/your/g&#x27;</span> -e <span class="string">&#x27;3,$s/This/That/g&#x27;</span> my.txt</span></span><br></pre></td></tr></table></figure>
<p>我们可以使用**&amp;**来当做被匹配的变量，然后可以在基本左右加点东西。如下所示：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/my/[&amp;]/g&#x27;</span> my.txt</span></span><br><span class="line">This is [my] cat, [my] cat&#x27;s name is betty</span><br><span class="line">This is [my] dog, [my] dog&#x27;s name is frank</span><br><span class="line">This is [my] fish, [my] fish&#x27;s name is george</span><br><span class="line">This is [my] goat, [my] goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<h4 id="圆括号匹配"><a class="markdownIt-Anchor" href="#圆括号匹配"></a> 圆括号匹配</h4>
<p>使用圆括号匹配的示例：（圆括号括起来的正则表达式所匹配的字符串会可以当成变量来使用，sed中使用的是<code>\1</code>,<code>\2</code>…）</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;s/This is my \([^,&amp;]*\),.*is \(.*\)/\1:\2/g&#x27;</span> my.txt</span></span><br><span class="line">cat:betty</span><br><span class="line">dog:frank</span><br><span class="line">fish:george</span><br><span class="line">goat:adam</span><br></pre></td></tr></table></figure>
<p>上面这个例子中的正则表达式有点复杂，解开如下（去掉转义字符）：</p>
<p>正则为：<code>This is my ([^,]*),.*is (.*)</code><br />
匹配为：<code>This is my (cat),......is (betty)</code></p>
<p>然后：<code>\1</code>就是<code>cat</code>，<code>\2</code>就是<code>betty</code></p>
<h4 id="sed命令"><a class="markdownIt-Anchor" href="#sed命令"></a> sed命令</h4>
<h5 id="n命令"><a class="markdownIt-Anchor" href="#n命令"></a> N命令</h5>
<p>先来看N命令 —— 把下一行的内容纳入当成缓冲区做匹配。</p>
<p>下面的的示例会把原文本中的偶数行纳入奇数行匹配，而s只匹配并替换一次，所以，就成了下面的结果：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;N;s/my/your/&#x27;</span> pets.txt</span></span><br><span class="line">This is your cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is your dog</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">This is your fish</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is your goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>也就是说，原来的文件成了：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">This is my cat\n  my cat&#39;s name is betty</span><br><span class="line">This is my dog\n  my dog&#39;s name is frank</span><br><span class="line">This is my fish\n  my fish&#39;s name is george</span><br><span class="line">This is my goat\n  my goat&#39;s name is adam</span><br></pre></td></tr></table></figure>
<p>这样一来，下面的例子你就明白了，</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;N;s/\n/,/&#x27;</span> pets.txt</span></span><br><span class="line">This is my cat,  my cat&#x27;s name is betty</span><br><span class="line">This is my dog,  my dog&#x27;s name is frank</span><br><span class="line">This is my fish,  my fish&#x27;s name is george</span><br><span class="line">This is my goat,  my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<h5 id="a命令和i命令"><a class="markdownIt-Anchor" href="#a命令和i命令"></a> a命令和i命令</h5>
<p>a命令就是append， i命令就是insert，它们是用来添加行的。如：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 其中的1 i表明，其要在第1行前插入一行（insert）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;1 i This is my monkey, my monkey&#x27;s name is wukong&quot;</span> my.txt</span></span><br><span class="line">This is my monkey, my monkey&#x27;s name is wukong</span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 其中的1 a表明，其要在最后一行后追加一行（append）</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;1 a This is my monkey, my monkey&#x27;s name is wukong&quot;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my monkey, my monkey&#x27;s name is wukong</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>我们可以运用匹配来添加文本：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 注意其中的/fish/a，这意思是匹配到/fish/后就追加一行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;/fish/a This is my monkey, my monkey&#x27;s name is wukong&quot;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my monkey, my monkey&#x27;s name is wukong</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<p>下面这个例子是对每个存在my的行都新插入一行<code>----</code>：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;/my/a ----&quot;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">----</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">----</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">----</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line">----</span><br></pre></td></tr></table></figure>
<h5 id="c命令"><a class="markdownIt-Anchor" href="#c命令"></a> c命令</h5>
<p>c 命令是替换匹配行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;2 c This is my monkey, my monkey&#x27;s name is wukong&quot;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my monkey, my monkey&#x27;s name is wukong</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&quot;/fish/c This is my monkey, my monkey&#x27;s name is wukong&quot;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my monkey, my monkey&#x27;s name is wukong</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br></pre></td></tr></table></figure>
<h5 id="d命令"><a class="markdownIt-Anchor" href="#d命令"></a> d命令</h5>
<p>删除匹配行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;/fish/d&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;2d&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;2,**$d**&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br></pre></td></tr></table></figure>
<h5 id="p命令"><a class="markdownIt-Anchor" href="#p命令"></a> p命令</h5>
<p>打印命令，可以把这个命令当成grep式的命令</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 匹配fish并输出，可以看到fish的那一行被打了两遍，</span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 这是因为sed处理时会把处理的信息输出</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;/fish/p&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line">This is my goat, my goat&#x27;s name is adam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 使用n参数就好了</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&#x27;/fish/p&#x27;</span> my.txt</span></span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从一个模式到另一个模式</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&#x27;/dog/,/fish/p&#x27;</span> my.txt</span></span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash">从第一行打印到匹配fish成功的那一行</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed -n <span class="string">&#x27;1,/fish/p&#x27;</span> my.txt</span></span><br><span class="line">This is my cat, my cat&#x27;s name is betty</span><br><span class="line">This is my dog, my dog&#x27;s name is frank</span><br><span class="line">This is my fish, my fish&#x27;s name is george</span><br></pre></td></tr></table></figure>
<h5 id="命令打包"><a class="markdownIt-Anchor" href="#命令打包"></a> 命令打包</h5>
<p>第二个是cmd可以是多个，它们可以用分号分开，可以用大括号括起来作为嵌套命令。下面是几个例子：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> cat pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is my dog</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">This is my fish</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 对3行到第6行，执行命令/This/d</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;3,6 &#123;/This/d&#125;&#x27;</span> pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 对3行到第6行，匹配/This/成功后，再匹配/fish/，成功后执行d命令</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;3,6 &#123;/This/&#123;/fish/d&#125;&#125;&#x27;</span> pets.txt</span></span><br><span class="line">This is my cat</span><br><span class="line">  my cat&#x27;s name is betty</span><br><span class="line">This is my dog</span><br><span class="line">  my dog&#x27;s name is frank</span><br><span class="line">  my fish&#x27;s name is george</span><br><span class="line">This is my goat</span><br><span class="line">  my goat&#x27;s name is adam</span><br><span class="line"></span><br><span class="line"><span class="meta">#</span><span class="bash"> 从第一行到最后一行，如果匹配到This，则删除之；如果前面有空格，则去除空格</span></span><br><span class="line"><span class="meta">$</span><span class="bash"> sed <span class="string">&#x27;1,$&#123;/This/d;s/^ *//g&#125;&#x27;</span> pets.txt</span></span><br><span class="line">my cat&#x27;s name is betty</span><br><span class="line">my dog&#x27;s name is frank</span><br><span class="line">my fish&#x27;s name is george</span><br><span class="line">my goat&#x27;s name is adam </span><br></pre></td></tr></table></figure>
<h3 id="正则表达式练习"><a class="markdownIt-Anchor" href="#正则表达式练习"></a> 正则表达式练习</h3>
<p>1、如何把 /etc/passwd 中用户uid 大于500 的行给打印出来？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F &#x27;:&#x27; &#x27;$3&gt;500 &#123;print&#125;&#x27; /etc/passwd</span><br></pre></td></tr></table></figure>
<p>2、awk中 NR，NF两个变量表示什么含义？<code>awk -F ':' '&#123;print $NR&#125;' /etc/passwd</code> 会打印出什么结果出来？</p>
<p>NR表示行数，NF表示一共有多少段。会打印出/etc/passwd文件中每行中和行数相同的列; 如果不存在，会输出空串.</p>
<p>3、用grep把1.txt文档中包含’abc’或者’123’的行过滤出来，并在过滤出来的行前面加上行号.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep -E -n &#x27;123|abc&#x27; 1.txt</span><br></pre></td></tr></table></figure>
<p>4、<code>grep -v '^$' 1.txt</code> 这样会过滤出哪些行？</p>
<p>过滤出不为空行的行（非空白行）</p>
<p>5、<code>'.'</code>  <code>'*'</code> 和 <code>'.*'</code>  分别表示什么含义？<code>'+'</code>和<code>'?'</code>表示什么含义，这五个符号是否可以在grep中使用，是否可以在grep、sed以及awk中使用？</p>
<p><code>'.'</code>：匹配任意单个字符</p>
<p><code>'*'</code>：将前一项匹配零次或多次</p>
<p><code>'.*'</code>：匹配任意零至多个字符</p>
<p><code>'+'</code>：将前一项匹配一次或多次</p>
<p><code>'?'</code>：将前一项匹配零次或一次</p>
<p>都可以在grep中使用，其中<code>?</code>，<code>+</code>需要使用反斜杠转义或使用-E选项。</p>
<p>都可以在awk中使用，需使用<code>//</code>包裹。</p>
<p>6、grep 里面用到一个 <code>&#123;&#125;</code> ，它在什么情况下使用？</p>
<table>
<thead>
<tr>
<th>用法</th>
<th>情况</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&#123;n&#125;</code></td>
<td>精确匹配前一项n次</td>
</tr>
<tr>
<td><code>&#123;n,&#125;</code></td>
<td>至少匹配n次。</td>
</tr>
<tr>
<td><code>&#123;,m&#125;</code></td>
<td>最多匹配前一项m次。</td>
</tr>
<tr>
<td><code>&#123;n,m&#125;</code></td>
<td>匹配前一项从n至m 次。</td>
</tr>
</tbody>
</table>
<p>7、截取日志1.log的第一段(以空格为分隔符), 按数字排序、然后去重，但是需要保留重复的数量如何做？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;&#123;print $1&#125;&#x27; 1.log | sort -n | uniq -c</span><br></pre></td></tr></table></figure>
<p>8、使用awk过滤出1.log中第7段(空格分隔)为’200’ 并且第8段为’11897’的行。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;$7==200&amp;&amp;$8==11897 &#123;print&#125;&#x27; 1.log</span><br></pre></td></tr></table></figure>
<p>9、请比较这两个命令的异同：<code>grep -v '^[0-9]' 1.txt</code> 和 <code>grep '^[^0-9]' 1.txt</code></p>
<p><code>grep -v '^[0-9]' 1.txt</code>会过滤出1.txt中除了以0-9开头的行以外的所有行；</p>
<p><code>grep '^[^0-9]' 1.txt</code>会过滤出1.txt中不以0-9开头的行。</p>
<p>两者输出结果中都不包含以0-9开头的行，但前者输出中包含空行，后者不包含。</p>
<p>10、awk中的<code>$0</code>表示什么？为什么以下两条命令的<code>$0</code>结果不一致呢？ <code>awk -F ':' '&#123;print $0&#125;' 1.txt</code>  和 <code>awk -F ':' '$7=1 &#123;print $0&#125;' 1.txt</code></p>
<p><code>$0</code> 表示整个行的内容</p>
<p><code>awk -F ':' '&#123;print $0&#125;' 1.txt</code> 会原样输出每一行</p>
<p><code>awk -F ':' '$7=1 &#123;print $0&#125;' 1.txt</code> 会将第7列替换为1，输出时不会输出分割字符串</p>
<p>11、使用grep过滤某个关键词时，如何把包含关键词的行连同上面一行打印出来，那下面一行呢？同时上面和下面都打印出来呢？</p>
<p>连同上面一行：-A1</p>
<p>下面一行：-B1</p>
<p>同时上面和下面都打印出来：-C1</p>
<p>12、假设stu.data的内容为如下所示，</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Name Course1 Course2 Course3</span><br><span class="line">Mary 89 87 76</span><br><span class="line">Tom 98 78 89</span><br><span class="line">Tony 89 78 87</span><br><span class="line">Adam 90 76 87</span><br></pre></td></tr></table></figure>
<p>请使用awk编程，打印出平均分最高的学生姓名及其平均分.</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27;BEGIN &#123; max_score=0; name=&quot;&quot;; &#125;</span></span></span><br><span class="line">&#123; if (NR &gt;= 2) &#123;</span><br><span class="line">    score=($2+$3+$4)/3;</span><br><span class="line">    if (score &gt; max_score) &#123;</span><br><span class="line">        max_score=score;</span><br><span class="line">        name=$1;</span><br><span class="line">    &#125;</span><br><span class="line">&#125; &#125;</span><br><span class="line">END &#123;print name,max_score&#125;&#x27; stu.data</span><br></pre></td></tr></table></figure>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">$</span><span class="bash"> awk <span class="string">&#x27; BEGIN &#123; score=0 &#125;</span></span></span><br><span class="line">&#123; if (NR &gt; 1 &amp;&amp; ($2+$3+$4) &gt; score) &#123; score=$2+$3+$4; name=$1 &#125; &#125;</span><br><span class="line">END &#123;print name,score/3&#125;&#x27; stu.data</span><br></pre></td></tr></table></figure>
<p>13、sed有一个选项，可以直接更改文本文件，是哪个选项？</p>
<p><code>-i</code> 选项</p>
<p>14、<code>sed -i 's/.*ie//;s/[&quot;|&amp;].*//' file</code>  这条命令表示什么操作呢？</p>
<p>删除文档中以ie结尾的字符串和以<code>&quot;</code>或<code>|</code>或<code>&amp;</code>开头的字符串</p>
<p>15、如何删除一个文档中的所有数字或者字母？</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -i &#x27;s/[a-zA-Z0-9]//g&#x27; filename</span><br></pre></td></tr></table></figure>
<p>16、<strong>实现两个集合的交并差</strong>。假设两个文本文件a.txt和b.txt作为集合，每一行可以看作一个集合元素（每个文本中每行不重复）。</p>
<ul>
<li>
<p>A交B：<code>cat a.txt b.txt | sort | uniq -d</code></p>
<blockquote>
<p><code>-d</code> 表示的是输出出现次数大于1的内容</p>
</blockquote>
</li>
<li>
<p>A并B：<code>cat a.txt b.txt | sort | uniq</code></p>
</li>
<li>
<p>A-B：<code>cat a.txt b.txt b.txt | sort | uniq -u</code></p>
<blockquote>
<p><code>-u</code> 表示的是输出出现次数为1的内容</p>
</blockquote>
</li>
</ul>
</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Holger</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://blog.holgerbest.top/2022/04/28/linux-study/">https://blog.holgerbest.top/2022/04/28/linux-study/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://blog.holgerbest.top" target="_blank">Holger 学习小站</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Linux/">Linux</a></div><div class="post_share"><div class="social-share" data-image="https://repo.live.holgerbest.top/img/GoU8bVvpLl3zNnH.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="/img/mm_reward.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/mm_reward.png" alt="wechat"/></a><div class="post-qr-code-desc">wechat</div></li><li class="reward-item"><a href="/img/alipay.jpeg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/alipay.jpeg" alt="alipay"/></a><div class="post-qr-code-desc">alipay</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/2022/01/18/alg-report/"><!--img.next-cover(src=url_for(pagination_cover) onerror=`onerror=null;src='${url_for(theme.error_img.post_page)}'` alt='cover of next post')--><img class="next-cover" src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/" onerror="onerror=null;src='https://i.loli.net/2020/05/01/gkihqEjXxJ5UZ1C.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">算法分析与设计课程报告：Dijkstra——带权有向图单源最短路径算法</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="fas fa-thumbs-up fa-fw"></i><span>相关推荐</span></div><div class="relatedPosts-list"><div><a href="/2021/03/07/linux-05-regex/" title="Linux笔记05：正则表达式与文本处理"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-03-07</div><div class="title">Linux笔记05：正则表达式与文本处理</div></div></a></div><div><a href="/2021/01/19/linux-04-text/" title="Linux笔记04：文本文件及处理工具"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-19</div><div class="title">Linux笔记04：文本文件及处理工具</div></div></a></div><div><a href="/2021/01/18/linux-03-state/" title="Linux笔记03：系统状态"><div class="content is-center"><div class="date"><i class="far fa-calendar-alt fa-fw"></i> 2021-01-18</div><div class="title">Linux笔记03：系统状态</div></div></a></div></div></div><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="waline-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src= "data:image/gif;base64,R0lGODdhAQABAPAAAMPDwwAAACwAAAAAAQABAAACAkQBADs=" data-lazy-src="/img/avatar.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Holger</div><div class="author-info__description">Never late to learn.</div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">68</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">52</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">21</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/HolgerZhang"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/HolgerZhang" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:holgerzhang@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">2023.08.12 准备开始写点blog了…… 更新日志：重新设计了【主站】；调整了【关于】、【友链】页面内容和显示逻辑。</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A6%82%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text"> 概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#gui"><span class="toc-number">1.1.</span> <span class="toc-text"> GUI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%9C%E7%A8%8B%E7%99%BB%E5%BD%95"><span class="toc-number">1.2.</span> <span class="toc-text"> 远程登录</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95%E7%AE%A1%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text"> 文件和目录管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E6%96%87%E4%BB%B6%E7%B3%BB%E7%BB%9F"><span class="toc-number">2.1.</span> <span class="toc-text"> Linux文件系统</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E4%B8%8E%E7%9B%AE%E5%BD%95%E7%9A%84%E6%9D%83%E9%99%90"><span class="toc-number">2.2.</span> <span class="toc-text"> 文件与目录的权限</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E4%BB%B6%E5%B1%9E%E6%80%A7"><span class="toc-number">2.3.</span> <span class="toc-text"> 文件属性</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E7%9A%84%E5%8E%8B%E7%BC%A9%E4%B8%8E%E6%89%93%E5%8C%85"><span class="toc-number">2.4.</span> <span class="toc-text"> 文档的压缩与打包</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#gzip"><span class="toc-number">2.4.1.</span> <span class="toc-text"> gzip</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#bzip2"><span class="toc-number">2.4.2.</span> <span class="toc-text"> bzip2</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#xz"><span class="toc-number">2.4.3.</span> <span class="toc-text"> xz</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#tar"><span class="toc-number">2.4.4.</span> <span class="toc-text"> tar</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#zipunzip"><span class="toc-number">2.4.5.</span> <span class="toc-text"> zip&#x2F;unzip</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%96%87%E6%A1%A3%E5%8E%8B%E7%BC%A9%E7%9A%84%E7%BB%83%E4%B9%A0"><span class="toc-number">2.5.</span> <span class="toc-text"> 文档压缩的练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B3%BB%E7%BB%9F%E7%94%A8%E6%88%B7%E4%B8%8E%E7%94%A8%E6%88%B7%E7%BB%84%E7%AE%A1%E7%90%86"><span class="toc-number">3.</span> <span class="toc-text"> 系统用户与用户组管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%88%B7"><span class="toc-number">3.1.</span> <span class="toc-text"> 用户</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#etcpasswd"><span class="toc-number">3.1.1.</span> <span class="toc-text"> &#x2F;etc&#x2F;passwd</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#etcshadow"><span class="toc-number">3.1.2.</span> <span class="toc-text"> &#x2F;etc&#x2F;shadow</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%99%BB%E5%BD%95%E7%9A%84%E7%94%A8%E6%88%B7"><span class="toc-number">3.1.3.</span> <span class="toc-text"> 登录的用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="toc-number">3.1.4.</span> <span class="toc-text"> 创建用户</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E5%AF%86%E7%A0%81"><span class="toc-number">3.1.5.</span> <span class="toc-text"> 修改密码</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BF%AE%E6%94%B9%E7%94%A8%E6%88%B7%E4%BF%A1%E6%81%AF"><span class="toc-number">3.1.6.</span> <span class="toc-text"> 修改用户信息</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%A0%E9%99%A4%E7%94%A8%E6%88%B7"><span class="toc-number">3.1.7.</span> <span class="toc-text"> 删除用户</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BE%A4%E7%BB%84"><span class="toc-number">3.2.</span> <span class="toc-text"> 群组</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#etcgroup"><span class="toc-number">3.2.1.</span> <span class="toc-text"> &#x2F;etc&#x2F;group</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#etcgshadow"><span class="toc-number">3.2.2.</span> <span class="toc-text"> &#x2F;etc&#x2F;gshadow</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%96%B0%E5%A2%9E%E5%88%A0%E9%99%A4%E7%BE%A4%E7%BB%84"><span class="toc-number">3.2.3.</span> <span class="toc-text"> 新增&#x2F;删除群组</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#acl"><span class="toc-number">3.3.</span> <span class="toc-text"> ACL</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E8%80%85%E8%BA%AB%E4%BB%BD%E5%88%87%E6%8D%A2"><span class="toc-number">3.4.</span> <span class="toc-text"> 使用者身份切换</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%83%E4%B9%A0"><span class="toc-number">3.5.</span> <span class="toc-text"> 练习</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%A3%81%E7%9B%98%E7%AE%A1%E7%90%86"><span class="toc-number">4.</span> <span class="toc-text"> 磁盘管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#linux%E4%B8%8B%E7%9A%84%E7%A3%81%E7%9B%98"><span class="toc-number">4.1.</span> <span class="toc-text"> Linux下的磁盘</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#df"><span class="toc-number">4.2.</span> <span class="toc-text"> df</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#du"><span class="toc-number">4.3.</span> <span class="toc-text"> du</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#fdisk"><span class="toc-number">4.4.</span> <span class="toc-text"> fdisk</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mke2fs"><span class="toc-number">4.5.</span> <span class="toc-text"> mke2fs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mkfs"><span class="toc-number">4.6.</span> <span class="toc-text"> mkfs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#dumpe2fs"><span class="toc-number">4.7.</span> <span class="toc-text"> dumpe2fs</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#e2label"><span class="toc-number">4.8.</span> <span class="toc-text"> e2label</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#mountumount"><span class="toc-number">4.9.</span> <span class="toc-text"> mount&#x2F;umount</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#shell%E7%BC%96%E7%A8%8B"><span class="toc-number">5.</span> <span class="toc-text"> Shell编程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E5%9F%BA%E7%A1%80"><span class="toc-number">5.1.</span> <span class="toc-text"> Shell基础</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8E%86%E5%8F%B2%E8%AE%B0%E5%BD%95"><span class="toc-number">5.1.1.</span> <span class="toc-text"> 历史记录</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A5%E5%85%A8%E5%8A%9F%E8%83%BD"><span class="toc-number">5.1.2.</span> <span class="toc-text"> 补全功能</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E5%88%AB%E5%90%8D"><span class="toc-number">5.1.3.</span> <span class="toc-text"> 命令别名</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%B7%A5%E4%BD%9C%E6%8E%A7%E5%88%B6-%E5%89%8D%E6%99%AF%E8%83%8C%E6%99%AF%E6%8E%A7%E5%88%B6"><span class="toc-number">5.1.4.</span> <span class="toc-text"> 工作控制、前景背景控制</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%9A%E9%85%8D%E7%AC%A6"><span class="toc-number">5.1.5.</span> <span class="toc-text"> 通配符</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%98%E9%87%8F"><span class="toc-number">5.1.6.</span> <span class="toc-text"> 变量</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#-code11-"><span class="toc-number">6.</span> <span class="toc-text"> 1
$ name&#x3D;&quot;$name&quot;yes
</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E7%9A%84%E8%BF%90%E8%A1%8C%E9%A1%BA%E5%BA%8F"><span class="toc-number">6.0.1.</span> <span class="toc-text"> 命令的运行顺序</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%A1%E9%81%93%E4%B8%8E%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">6.1.</span> <span class="toc-text"> 管道与重定向</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8D%E5%AE%9A%E5%90%91"><span class="toc-number">6.1.1.</span> <span class="toc-text"> 重定向</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%AE%A1%E9%81%93"><span class="toc-number">6.1.2.</span> <span class="toc-text"> 管道</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#here-document-%E4%B8%8E-here-string"><span class="toc-number">6.1.3.</span> <span class="toc-text"> Here Document 与 Here String</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#cut"><span class="toc-number">6.2.</span> <span class="toc-text"> cut</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sort"><span class="toc-number">6.3.</span> <span class="toc-text"> sort</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#uniq"><span class="toc-number">6.4.</span> <span class="toc-text"> uniq</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#wc"><span class="toc-number">6.5.</span> <span class="toc-text"> wc</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tee"><span class="toc-number">6.6.</span> <span class="toc-text"> tee</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#tr"><span class="toc-number">6.7.</span> <span class="toc-text"> tr</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#paste"><span class="toc-number">6.8.</span> <span class="toc-text"> paste</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#expand"><span class="toc-number">6.9.</span> <span class="toc-text"> expand</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#split"><span class="toc-number">6.10.</span> <span class="toc-text"> split</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#shell%E5%9F%BA%E7%A1%80%E7%BB%83%E4%B9%A0"><span class="toc-number">6.11.</span> <span class="toc-text"> Shell基础练习</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-number">6.12.</span> <span class="toc-text"> 正则表达式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#grep"><span class="toc-number">6.13.</span> <span class="toc-text"> grep</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk%E7%BC%96%E7%A8%8B%E8%AF%AD%E8%A8%80%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86%E5%BC%95%E6%93%8E"><span class="toc-number">6.14.</span> <span class="toc-text"> awk（编程语言&#x2F;数据处理引擎）</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BE%93%E5%87%BA"><span class="toc-number">6.14.1.</span> <span class="toc-text"> 输出</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%80%89%E6%8B%A9"><span class="toc-number">6.14.2.</span> <span class="toc-text"> 选择</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%AF%B9%E6%AF%94%E9%80%89%E6%8B%A9"><span class="toc-number">6.14.2.1.</span> <span class="toc-text"> 通过对比选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E8%AE%A1%E7%AE%97%E9%80%89%E6%8B%A9"><span class="toc-number">6.14.2.2.</span> <span class="toc-text"> 通过计算选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E6%96%87%E6%9C%AC%E5%86%85%E5%AE%B9%E9%80%89%E6%8B%A9"><span class="toc-number">6.14.2.3.</span> <span class="toc-text"> 通过文本内容选择</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E7%BB%84%E5%90%88"><span class="toc-number">6.14.2.4.</span> <span class="toc-text"> 模式组合</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#begin-%E4%B8%8E-end"><span class="toc-number">6.14.3.</span> <span class="toc-text"> BEGIN 与 END</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8-awk-%E8%BF%9B%E8%A1%8C%E8%AE%A1%E7%AE%97"><span class="toc-number">6.14.4.</span> <span class="toc-text"> 使用 AWK 进行计算</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E8%AE%A1%E6%95%B0"><span class="toc-number">6.14.4.1.</span> <span class="toc-text"> 计数</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%B1%82%E5%92%8C%E4%B8%8E%E5%B9%B3%E5%9D%87%E5%80%BC"><span class="toc-number">6.14.4.2.</span> <span class="toc-text"> 求和与平均值</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%84%E7%90%86%E6%96%87%E6%9C%AC"><span class="toc-number">6.14.5.</span> <span class="toc-text"> 处理文本</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%93%E5%8D%B0%E6%9C%80%E5%90%8E%E4%B8%80%E4%B8%AA%E8%BE%93%E5%85%A5%E8%A1%8C"><span class="toc-number">6.14.6.</span> <span class="toc-text"> 打印最后一个输入行</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#sed"><span class="toc-number">6.15.</span> <span class="toc-text"> sed</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%94%A8s%E5%91%BD%E4%BB%A4%E6%9B%BF%E6%8D%A2"><span class="toc-number">6.15.1.</span> <span class="toc-text"> 用s命令替换</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A4%9A%E4%B8%AA%E5%8C%B9%E9%85%8D"><span class="toc-number">6.15.2.</span> <span class="toc-text"> 多个匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9C%86%E6%8B%AC%E5%8F%B7%E5%8C%B9%E9%85%8D"><span class="toc-number">6.15.3.</span> <span class="toc-text"> 圆括号匹配</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#sed%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.</span> <span class="toc-text"> sed命令</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#n%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.1.</span> <span class="toc-text"> N命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#a%E5%91%BD%E4%BB%A4%E5%92%8Ci%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.2.</span> <span class="toc-text"> a命令和i命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#c%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.3.</span> <span class="toc-text"> c命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#d%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.4.</span> <span class="toc-text"> d命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#p%E5%91%BD%E4%BB%A4"><span class="toc-number">6.15.4.5.</span> <span class="toc-text"> p命令</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%91%BD%E4%BB%A4%E6%89%93%E5%8C%85"><span class="toc-number">6.15.4.6.</span> <span class="toc-text"> 命令打包</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%BB%83%E4%B9%A0"><span class="toc-number">6.16.</span> <span class="toc-text"> 正则表达式练习</span></a></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/04/28/linux-study/" title="Linux学习笔记">Linux学习笔记</a><time datetime="2022-04-28T11:19:35.000Z" title="发表于 2022-04-28 19:19:35">2022-04-28</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/18/alg-report/" title="算法分析与设计课程报告：Dijkstra——带权有向图单源最短路径算法">算法分析与设计课程报告：Dijkstra——带权有向图单源最短路径算法</a><time datetime="2022-01-18T12:00:00.000Z" title="发表于 2022-01-18 20:00:00">2022-01-18</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/14/os-report-3/" title="操作系统课程报告3：中央处理器与存储器系统速度及影响因素的探究">操作系统课程报告3：中央处理器与存储器系统速度及影响因素的探究</a><time datetime="2022-01-14T12:00:00.000Z" title="发表于 2022-01-14 20:00:00">2022-01-14</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/10/jiwang/" title="计算机网络-期末复习提纲">计算机网络-期末复习提纲</a><time datetime="2022-01-09T18:26:15.000Z" title="发表于 2022-01-10 02:26:15">2022-01-10</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2022/01/01/AI-02/" title="人工智能与知识工程 第二部分">人工智能与知识工程 第二部分</a><time datetime="2022-01-01T13:24:43.000Z" title="发表于 2022-01-01 21:24:43">2022-01-01</time></div></div></div></div></div></div></main><footer id="footer" style="background: rgb(60,63,65)"><div id="footer-wrap"><div class="copyright">&copy;2020 - 2023 By Holger</div><div class="footer_custom_text"><div> <span><a href="/eula/">EULA</a></span> |   <span><a href="https://holgerbest.top/" target="_blank">Home</a> <span><i class="fas fa-external-link-alt"></i></span></span> |  <span><a href="http://gpt.holgerbest.top/" target="_blank">GPT (free)</a> <span><i class="fas fa-external-link-alt"></i></span></span> </div> <div><a href="http://beian.miit.gov.cn/" target="_blank" rel="nofollow noopener">黑ICP备20001742号</a></div></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/vanilla-lazyload/dist/lazyload.iife.min.js"></script><script src="/js/search/local-search.js"></script><script>var preloader = {
  endLoading: () => {
    document.body.style.overflow = 'auto';
    document.getElementById('loading-box').classList.add("loaded")
  },
  initLoading: () => {
    document.body.style.overflow = '';
    document.getElementById('loading-box').classList.remove("loaded")

  }
}
window.addEventListener('load',preloader.endLoading())</script><div class="js-pjax"><script>function loadWaline () {
  function initWaline () {
    const waline = new Waline(Object.assign({
      el: '#waline-wrap',
      serverURL: 'https://waline-api-theta.vercel.app/',
      avatar: 'monsterid',
      avatarCDN: 'https://sdn.geekzu.org/avatar/',
      path: location.pathname,
      visitor: false,
      dark: 'html[data-theme="dark"]'
    }, null))
  }

  if (typeof Waline === 'function') initWaline() 
  else getScript('https://cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js').then(initWaline)
}

if ('Waline' === 'Waline' || !true) {
  if (true) btf.loadComment(document.getElementById('waline-wrap'),loadWaline)
  else setTimeout(loadWaline, 0)
} else {
  function loadOtherComment () {
    loadWaline()
  }
}</script></div><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc@1/dist/click-heart.min.js" async="async" mobile="false"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>